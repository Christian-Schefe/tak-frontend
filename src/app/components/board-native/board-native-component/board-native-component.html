@let takGame = game();
@let settings = gameSettings();
@let pBoardSettings = boardSettings();
<div
  class="w-full h-full border border-surface-200 dark:border-surface-700 rounded-md py-16 px-2"
  [style.backgroundColor]="pBoardSettings.theme.background"
>
  <div class="w-full h-full relative">
    <div class="absolute inset-0 m-auto w-auto h-auto max-w-full max-h-full aspect-square">
      <div
        class="w-full h-full grid"
        [style]="{
          gridTemplateColumns: `repeat(${takGame.actualGame.settings.boardSize}, minmax(0, 1fr))`,
        }"
      >
        @for (item of tilePositions(); track $index) {
          <app-board-tile
            [interactive]="true"
            [x]="item.pos.x"
            [y]="item.pos.y"
            [settings]="settings"
            [gameState]="takGame.actualGame.gameState"
            [plyIndex]="takGame.plyIndex"
            (tileClick)="onClickTile(item.pos)"
            [data]="item.data"
            [boardSettings]="pBoardSettings"
          ></app-board-tile>
        }
        <div class="absolute inset-0 pointer-events-none">
          @for (piece of pieceIds(); track piece.id) {
            <app-board-piece
              [data]="piece.data"
              [settings]="settings"
              [boardSettings]="pBoardSettings"
            ></app-board-piece>
          }
        </div>
      </div>
    </div>
  </div>
</div>
