<p-scrollpanel class="p-1 w-full h-full">
  @for (item of messages(); track $index) {
    <div class="p-1">
      @if (item.showTimestamp) {
        <p class="text-sm text-surface-500 dark:text-surface-300 mb-1 mt-2">
          {{ item.msg.timestamp | date: 'shortTime' }}
        </p>
      }
      @let playerInfo = playerInfos()[item.msg.fromAccountId];
      <p class="text-surface-700 dark:text-surface-400">
        <span class="font-bold wrap-anywhere"
          >{{ playerInfo.hasValue() ? playerInfo.value().displayName : '' }}:
        </span>
        @for (token of item.tokens; track $index) {
          @switch (token.type) {
            @case ('text') {
              <span class="wrap-anywhere">{{ token.text }}</span>
            }
            @case ('emote') {
              <img
                class="inline h-8 w-8 mx-0.5 align-bottom"
                [src]="token.emote.url"
                [alt]="token.emote.code"
                title="{{ token.emote.code }}"
              />
            }
          }
        }
      </p>
    </div>
  }
</p-scrollpanel>
