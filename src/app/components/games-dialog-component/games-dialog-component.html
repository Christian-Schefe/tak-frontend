<p-dialog
  [(visible)]="visible"
  [modal]="true"
  [dismissableMask]="true"
  header="Games"
  [draggable]="false"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '50vw' }"
>
  @let playerInfosMap = playerInfos();
  <p-table [value]="this.gameService.games()" [rowTrackBy]="trackBy">
    <ng-template #header>
      <tr>
        <th>White Player</th>
        <th>Black Player</th>
        <th>Board Size</th>
        <th>Komi</th>
      </tr>
    </ng-template>
    <ng-template #body let-item>
      @let game = asGame(item);
      @let whitePlayerInfo = playerInfosMap[game.whiteId];
      @let blackPlayerInfo = playerInfosMap[game.blackId];
      <tr>
        <td>
          @if (whitePlayerInfo.hasValue()) {
            @let player = whitePlayerInfo.value();
            {{ player.displayName }}
            @if (player.rating.type === 'rated') {
              {{ ' ' }}({{ player.rating.rating }})
            }
          }
        </td>
        <td>
          @if (blackPlayerInfo.hasValue()) {
            @let player = blackPlayerInfo.value();
            {{ player.displayName }}
            @if (player.rating.type === 'rated') {
              {{ ' ' }}({{ player.rating.rating }})
            }
          }
        </td>
        <td>{{ game.boardSize }}</td>
        <td>{{ game.halfKomi / 2 }}</td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>
