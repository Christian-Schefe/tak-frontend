@let curGame = currentGame();
@let ongoingGame = game();
@let gamePlayers = players();
@if (curGame && ongoingGame && gamePlayers) {
  <app-game-component
    [game]="ongoingGame"
    (action)="onLocalAction($event)"
    (setHistoryPlyIndex)="onSetHistoryPlyIndex($event)"
    [mode]="curGame.mode"
    [players]="gamePlayers"
    [requests]="requests()"
    (resign)="onResign()"
    (requestDraw)="onRequestDraw()"
    (requestUndo)="onRequestUndo()"
    (retractRequest)="onRetractRequest($event)"
    (requestDecision)="onRequestDecision($event.requestId, $event.decision)"
  ></app-game-component>
} @else {
  <div class="flex flex-col items-center w-full">
    @if (ongoingGameStatus.resource.isLoading()) {
      <p-progress-spinner></p-progress-spinner>
    } @else {
      <p>No ongoing game.</p>
    }
  </div>
}
